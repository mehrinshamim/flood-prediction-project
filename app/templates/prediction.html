{% extends "base.html" %}

{% block context %}
<div class="form-container">
    <h1>Predictions</h1>
    <form action="" method="post" novalidate>
        {{ form.hidden_tag() }}

        <div class="form-group">
            <label for="jan">{{ form.jan.label }}</label>
            {{ form.jan(class="form-control") }}
            {% for error in form.jan.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group">
            <label for="feb">{{ form.feb.label }}</label>
            {{ form.feb(class="form-control") }}
            {% for error in form.feb.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        
        <div class="form-group">
            <label for="mar">{{ form.mar.label }}</label>
            {{ form.mar(class="form-control") }}
            {% for error in form.mar.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="apr">{{ form.apr.label }}</label>
            {{ form.apr(class="form-control") }}
            {% for error in form.apr.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="may">{{ form.may.label }}</label>
            {{ form.may(class="form-control") }}
            {% for error in form.may.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="jun">{{ form.jun.label }}</label>
            {{ form.jun(class="form-control") }}
            {% for error in form.jun.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="jul">{{ form.jul.label }}</label>
            {{ form.jul(class="form-control") }}
            {% for error in form.jul.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="aug">{{ form.aug.label }}</label>
            {{ form.aug(class="form-control") }}
            {% for error in form.aug.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="sep">{{ form.sep.label }}</label>
            {{ form.sep(class="form-control") }}
            {% for error in form.sep.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="oct">{{ form.oct.label }}</label>
            {{ form.oct(class="form-control") }}
            {% for error in form.oct.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="nov">{{ form.nov.label }}</label>
            {{ form.nov(class="form-control") }}
            {% for error in form.nov.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="dec">{{ form.dec.label }}</label>
            {{ form.dec(class="form-control") }}
            {% for error in form.dec.errors %}
                <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>

        <div class="form-group">
            <label for="annual_rainfall">Annual Rainfall</label>
            <input type="text" class="form-control" id="annual_rainfall" readonly>
        </div>
        
        <div class="form-group">
            {{ form.submit(class="btn btn-primary") }}
        </div>
    </form>
</div>
{% endblock %}

{%  block scripts %}
<script>
    const monthInputs = document.querySelectorAll('input[id^="jan"], input[id^="feb"], input[id^="mar"], input[id^="apr"], input[id^="may"], input[id^="jun"], input[id^="jul"], input[id^="aug"], input[id^="sep"], input[id^="oct"], input[id^="nov"], input[id^="dec"]');
    const annualRainfallInput = document.getElementById('annual_rainfall');
  
    monthInputs.forEach((input) => {
        input.addEventListener('input', calculateAnnualRainfall);
    });
  
    function calculateAnnualRainfall() {
        const monthValues = Array.from(monthInputs).map((input) => parseFloat(input.value) || 0);
        const annualRainfall = monthValues.reduce((sum, value) => sum + value, 0) / 12;
        annualRainfallInput.value = annualRainfall.toFixed(2);
    }
</script>
{% endblock %}